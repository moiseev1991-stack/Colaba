# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ Secrets –¥–ª—è GitHub

–ì–æ—Ç–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

## üîê GitHub Secrets

**–ü—É—Ç—å:** `Settings ‚Üí Secrets and variables ‚Üí Actions ‚Üí Secrets`

### ‚ö†Ô∏è –í–ê–ñ–ù–û: Secrets –ù–ï —Ç—Ä–µ–±—É—é—Ç—Å—è!

–í —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã GitHub Actions (`GITHUB_TOKEN`), –ø–æ—ç—Ç–æ–º—É **–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ Secrets –¥–æ–±–∞–≤–ª—è—Ç—å –ù–ï –Ω—É–∂–Ω–æ**.

–ï—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ secrets (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API), –¥–æ–±–∞–≤—å—Ç–µ –∏—Ö –∑–¥–µ—Å—å.

---

## üìã GitHub Variables (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ü—É—Ç—å:** `Settings ‚Üí Secrets and variables ‚Üí Actions ‚Üí Variables`

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):

| –ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------------|----------|----------|
| `BACKEND_PORT` | `8000` | –ü–æ—Ä—Ç backend (–µ—Å–ª–∏ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ) |
| `FRONTEND_PORT` | `3000` | –ü–æ—Ä—Ç frontend (–µ—Å–ª–∏ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ) |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã. –ï—Å–ª–∏ –Ω–µ –¥–æ–±–∞–≤–ª—è—Ç—å, –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑ `docker-compose.prod.yml`.

---

## üñ•Ô∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞ (—Ñ–∞–π–ª `/opt/colaba/.env`)

–≠—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ —Ñ–∞–π–ª `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, **–ù–ï –≤ GitHub**.

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤ —Ñ–∞–π–ª–µ `/opt/colaba/.env`:

```env
# ============================================
# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï
# ============================================

# –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π –∫–ª—é—á)
SECRET_KEY=–ó–ê–ú–ï–ù–ò–¢–ï_–ù–ê_–ù–ê–î–ï–ñ–ù–´–ô_–ö–õ–Æ–ß

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL
POSTGRES_USER=leadgen_user
POSTGRES_PASSWORD=–ó–ê–ú–ï–ù–ò–¢–ï_–ù–ê_–ù–ê–î–ï–ñ–ù–´–ô_–ü–ê–†–û–õ–¨
POSTGRES_DB=leadgen_db

# URL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–∑–∞–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π)
DATABASE_URL=postgresql+asyncpg://leadgen_user:–ó–ê–ú–ï–ù–ò–¢–ï_–ü–ê–†–û–õ–¨@postgres:5432/leadgen_db
DATABASE_URL_SYNC=postgresql://leadgen_user:–ó–ê–ú–ï–ù–ò–¢–ï_–ü–ê–†–û–õ–¨@postgres:5432/leadgen_db

# Redis
REDIS_URL=redis://redis:6379/0
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0

# Frontend (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω)
NEXT_PUBLIC_API_URL=https://your-domain.com/api/v1

# CORS (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω)
CORS_ORIGINS=https://your-domain.com
```

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

```env
# ============================================
# –û–ü–¶–ò–û–ù–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï
# ============================================

# –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
ENVIRONMENT=production
DEBUG=False
LOG_LEVEL=INFO

# –ü–æ—Ä—Ç—ã (–µ—Å–ª–∏ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö)
BACKEND_PORT=8000
FRONTEND_PORT=3000

# –í–æ—Ä–∫–µ—Ä—ã
BACKEND_WORKERS=2
CELERY_CONCURRENCY=2

# AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ)
OPENAI_API_KEY=
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama2

# –Ø–Ω–¥–µ–∫—Å XML API (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ)
YANDEX_XML_FOLDER_ID=
YANDEX_XML_KEY=

# –ü—Ä–æ–∫—Å–∏ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ)
USE_PROXY=false
PROXY_URL=
PROXY_LIST=
```

---

## üîë –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SECRET_KEY:

**Python:**
```bash
python -c "import secrets; print(secrets.token_urlsafe(32))"
```

**OpenSSL:**
```bash
openssl rand -base64 32
```

**–ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:**
```
Xk9pL2mN4qR7sT8uV1wX3yZ5aB6cD9eF0gH2iJ4kL5mN
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è POSTGRES_PASSWORD:

**OpenSSL:**
```bash
openssl rand -base64 24
```

**–ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:**
```
aB3cD5eF7gH9iJ1kL3mN5oP7qR9sT1uV3wX5yZ
```

---

## üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é

### –î–ª—è GitHub Variables (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `https://github.com/moiseev1991-stack/Colaba`
2. –û—Ç–∫—Ä–æ–π—Ç–µ: **Settings ‚Üí Secrets and variables ‚Üí Actions**
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Variables**
4. –ù–∞–∂–º–∏—Ç–µ **New repository variable**
5. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã –≤—ã—à–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

### –î–ª—è —Ñ–∞–π–ª–∞ `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª: `sudo nano /opt/colaba/.env`
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤—ã—à–µ
4. –ó–∞–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è:
   - `SECRET_KEY` - —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π –∫–ª—é—á
   - `POSTGRES_PASSWORD` - —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å
   - `NEXT_PUBLIC_API_URL` - —É–∫–∞–∂–∏—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω
   - `CORS_ORIGINS` - —É–∫–∞–∂–∏—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª
6. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞: `sudo chmod 600 /opt/colaba/.env`
7. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞: `sudo chown deploy:deploy /opt/colaba/.env`

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç

- [ ] GitHub Secrets: **–ù–ï —Ç—Ä–µ–±—É—é—Ç—Å—è** (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã)
- [ ] GitHub Variables: –î–æ–±–∞–≤–ª–µ–Ω—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ—Ä—Ç—ã)
- [ ] –§–∞–π–ª `/opt/colaba/.env` —Å–æ–∑–¥–∞–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [ ] `SECRET_KEY` —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∏ –¥–æ–±–∞–≤–ª–µ–Ω
- [ ] `POSTGRES_PASSWORD` —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∏ –¥–æ–±–∞–≤–ª–µ–Ω
- [ ] `NEXT_PUBLIC_API_URL` –∑–∞–ø–æ–ª–Ω–µ–Ω –≤–∞—à–∏–º –¥–æ–º–µ–Ω–æ–º
- [ ] `CORS_ORIGINS` –∑–∞–ø–æ–ª–Ω–µ–Ω –≤–∞—à–∏–º –¥–æ–º–µ–Ω–æ–º
- [ ] –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ `.env` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ (`chmod 600`)

---

## üö® –í–∞–∂–Ω–æ

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ** —Ñ–∞–π–ª `.env` –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–Ω–∞–¥–µ–∂–Ω—ã–µ –ø–∞—Ä–æ–ª–∏** (–º–∏–Ω–∏–º—É–º 16 —Å–∏–º–≤–æ–ª–æ–≤)
3. **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ** –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
4. GitHub Secrets **–ù–ï —Ç—Ä–µ–±—É—é—Ç—Å—è** - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö: [VARIABLES_REFERENCE.md](./VARIABLES_REFERENCE.md)
- –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ `.env`: [ENV_PRODUCTION.example](./ENV_PRODUCTION.example)
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ: [GITHUB_ACTIONS_SETUP.md](./GITHUB_ACTIONS_SETUP.md)
