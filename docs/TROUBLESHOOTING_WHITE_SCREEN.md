# Устранение белого экрана на production

## Симптомы
- HTML мелькает меньше секунды (например, «Выберите раздел»)
- Затем белый экран
- Favicon отображается
- В консоли: React #418, #423, HierarchyRequestError, NotFoundError

## Что уже сделано
- `ClientHydrationFix` — отложенный рендер до mount
- `AppErrorBoundary` — вместо белого экрана показывается «Обновить страницу»
- `suppressHydrationWarning` на html/body
- Исправлены `new Date()` в LandingFooter

## Шаги для диагностики

### 1. Проверить без расширений браузера
Откройте сайт в **режиме инкогнито** (Ctrl+Shift+N) или в другом браузере.
Расширения (переводчики, блокировщики, инжекторы) могут менять DOM и вызывать hydration errors.

### 2. Очистить кэш и данные сайта
- Chrome: DevTools → Application → Clear site data
- Или: Ctrl+Shift+Delete → «Данные сайтов»

### 3. Проверить консоль и Network
- F12 → Console: сохранить полный текст ошибок
- F12 → Network: убедиться, что все запросы (JS, CSS) возвращают 200

### 4. Отключить сервис-воркеры
Если есть PWA / Service Worker:
- DevTools → Application → Service Workers → Unregister

### 5. Проверить CDN и прокси
Если перед приложением стоит Cloudflare или другой прокси:
- Отключить «Auto Minify» (может ломать JS)
- Отключить инъекцию скриптов
- Убедиться, что HTML не модифицируется

### 6. Проверить вывод Error Boundary
После последних изменений вместо белого экрана должно показываться:
«Что-то пошло не так. Попробуйте обновить страницу.»

Если видите это сообщение — Error Boundary сработал. Обновите страницу и посмотрите, повторяется ли ошибка.

## Крайний вариант: статический экспорт
Если hydration так и не устранить, можно попробовать:
- `output: 'export'` в next.config.js
- Ограничение: без SSR, без API routes в Next.js (используйте внешний backend)
