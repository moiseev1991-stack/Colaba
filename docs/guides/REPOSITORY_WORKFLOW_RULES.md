# Правила работы с репозиторием Colaba

## Версия: 1.0
## Дата: 22 января 2026

---

## 1. Основные принципы

### 1.1 Структура проекта

Проект следует монорепозиторий структуре:
- `backend/` - весь backend код
- `frontend/` - весь frontend код
- `docs/` - вся документация
- `scripts/` - все скрипты
- Корень - только конфигурационные файлы

**См. подробности**: [PROJECT_STRUCTURE_RULES.md](PROJECT_STRUCTURE_RULES.md)

### 1.2 Следование правилам

**ВСЕГДА** проверять правила перед созданием/перемещением файлов:
1. Где должен находиться файл согласно `PROJECT_STRUCTURE_RULES.md`?
2. Соответствует ли имя файла конвенциям?
3. Не создаю ли я дубликаты?

---

## 2. Правила работы с Git

### 2.1 Коммиты

**Когда делать коммиты:**
- ✅ После завершения логической единицы работы
- ✅ После рефакторинга или реорганизации
- ✅ После исправления багов
- ✅ После добавления новой функциональности

**Формат сообщений коммитов:**
```
<type>(<scope>): <subject>

<body>

<footer>
```

**Типы:**
- `feat`: Новая функциональность
- `fix`: Исправление бага
- `docs`: Изменения в документации
- `refactor`: Рефакторинг кода
- `test`: Добавление тестов
- `chore`: Изменения в конфигурации, зависимостях
- `style`: Форматирование кода
- `perf`: Улучшение производительности

**Примеры:**
```
feat(backend): Add user authentication endpoint
fix(frontend): Fix search form validation
docs(project): Update deployment instructions
refactor(backend): Reorganize project structure
```

### 2.2 Ветки

**Формат имен веток:**
- `feature/<название>` - новая функциональность
- `fix/<название>` - исправление бага
- `docs/<название>` - изменения в документации
- `refactor/<название>` - рефакторинг
- `chore/<название>` - технические изменения

**Примеры:**
- `feature/user-authentication`
- `fix/search-validation`
- `docs/api-documentation`
- `refactor/project-structure`

### 2.3 Push в репозиторий

**⚠️ КРИТИЧЕСКИ ВАЖНО: НЕ ДЕЛАТЬ АВТОМАТИЧЕСКИЙ PUSH**

**Правило:**
- ❌ **НИКОГДА** не выполнять `git push` автоматически
- ❌ **НИКОГДА** не выполнять `git push` без явного указания пользователя
- ✅ Push выполняется **ТОЛЬКО** после явной команды пользователя: "запушь", "отправь в репозиторий", "push"

**Что можно делать автоматически:**
- ✅ `git add` - добавление файлов в staging
- ✅ `git commit` - создание коммитов (после завершения работы)
- ✅ `git status` - проверка статуса
- ✅ `git diff` - просмотр изменений

**Что НЕЛЬЗЯ делать автоматически:**
- ❌ `git push` - отправка в удаленный репозиторий
- ❌ `git push --force` - принудительная отправка
- ❌ `git push origin <branch>` - отправка конкретной ветки

**Процесс работы:**
1. Выполнить работу (создать/изменить файлы)
2. Добавить изменения: `git add`
3. Создать коммит: `git commit -m "..."` (можно автоматически)
4. **ОСТАНОВИТЬСЯ** - не делать push
5. Сообщить пользователю: "Изменения закоммичены. Выполнить push?"
6. Дождаться явного указания пользователя
7. Только после команды пользователя выполнить `git push`

**Пример правильного диалога:**
```
AI: Я создал файл и закоммитил изменения.
    Коммит: "feat(backend): Add new endpoint"
    Выполнить push в репозиторий?

User: да, запушь

AI: [Выполняет git push]
    ✓ Изменения отправлены в репозиторий
```

### 2.4 Что НЕ коммитить

- ❌ `.env` файлы (только `.env.example`)
- ❌ `__pycache__/` и `*.pyc` файлы
- ❌ `node_modules/`
- ❌ `.next/` и другие build артефакты
- ❌ Временные файлы (`*.tmp`, `*.log`, `*.bak`)
- ❌ IDE конфигурация (`.vscode/`, `.idea/`)
- ❌ Личные заметки и черновики

---

## 3. Правила создания файлов

### 3.1 Перед созданием файла

**Обязательные шаги:**
1. ✅ Проверить `PROJECT_STRUCTURE_RULES.md` - где должен находиться файл?
2. ✅ Проверить существующие файлы - нет ли уже похожего функционала?
3. ✅ Следовать конвенциям именования
4. ✅ Убедиться, что не создаю дубликаты

### 3.2 Создание скриптов

**Правило:**
- ✅ Все скрипты → `scripts/`
- ✅ Скрипты настройки → `scripts/setup/`
- ✅ Скрипты развертывания → `scripts/deployment/`
- ❌ **НИКОГДА** не создавать скрипты в корне проекта

**Примеры:**
- `scripts/start.ps1` ✅
- `scripts/setup/install-dependencies.ps1` ✅
- `start.ps1` в корне ❌

### 3.3 Создание документации

**Правило:**
- ✅ Вся документация → `docs/`
- ✅ Архитектурные документы → `docs/architecture/`
- ✅ API документация → `docs/api/`
- ✅ Руководства → `docs/guides/`
- ✅ Документация по развертыванию → `docs/deployment/`
- ❌ **НИКОГДА** не создавать документацию в корне (кроме `README.md`)

---

## 4. Правила работы с Cursor AI

### 4.1 Обязательные проверки перед действиями

**Перед созданием файла:**
1. Где должен находиться файл согласно правилам?
2. Нет ли уже похожего файла?
3. Соответствует ли имя конвенциям?

**Перед перемещением файла:**
1. Куда должен быть перемещен согласно правилам?
2. Нужно ли обновить импорты?
3. Нужно ли обновить документацию?

**Перед коммитом:**
1. Все файлы в правильных местах?
2. Нет дубликатов?
3. Сообщение коммита соответствует формату?

**Перед push:**
1. ✅ **ВСЕГДА** спросить пользователя
2. ✅ **НИКОГДА** не делать автоматически

### 4.2 Порядок работы

**Правильная последовательность:**
1. Анализ задачи
2. Проверка правил (`PROJECT_STRUCTURE_RULES.md`)
3. Выполнение работы
4. Проверка результата
5. Коммит изменений (если нужно)
6. **ОСТАНОВКА** - сообщить пользователю
7. Дождаться указания для push

**Неправильная последовательность:**
1. Выполнение работы
2. Коммит
3. ❌ Автоматический push (НЕПРАВИЛЬНО!)

### 4.3 Сообщения пользователю

**После коммита:**
```
✓ Изменения закоммичены
  Коммит: "feat(backend): Add new feature"
  
Выполнить push в репозиторий?
```

**После push (только после команды пользователя):**
```
✓ Изменения отправлены в репозиторий
  Ветка: main
  Коммит: abc1234
```

---

## 5. Чек-лист перед коммитом

- [ ] Файлы находятся в правильных папках (согласно `PROJECT_STRUCTURE_RULES.md`)
- [ ] Нет дублирующихся файлов
- [ ] Импорты корректны и работают
- [ ] Код следует конвенциям проекта
- [ ] Документация обновлена (если нужно)
- [ ] Тесты проходят (если есть)
- [ ] `.gitignore` настроен правильно
- [ ] Нет временных файлов в коммите
- [ ] Сообщение коммита соответствует формату

---

## 6. Чек-лист перед push

- [ ] Все изменения закоммичены
- [ ] Получено явное указание пользователя на push
- [ ] Проверен статус: `git status`
- [ ] Проверена ветка: `git branch`
- [ ] Готов к отправке

**⚠️ ВАЖНО:** Если пользователь не дал явного указания - НЕ ДЕЛАТЬ PUSH!

---

## 7. Исключения

### 7.1 Когда можно сделать push автоматически

**НИКОГДА!** Push всегда требует явного указания пользователя.

### 7.2 Когда можно пропустить коммит

- Если изменения очень маленькие и незначительные
- Если пользователь явно попросил не коммитить
- Если это временные/отладочные изменения

---

## 8. Примеры правильной работы

### Пример 1: Создание нового файла

```
1. Пользователь: "Создай скрипт для запуска проекта"
2. AI: [Проверяет PROJECT_STRUCTURE_RULES.md]
3. AI: [Создает scripts/start.ps1]
4. AI: [Коммитит: "feat: Add start script"]
5. AI: "✓ Скрипт создан и закоммичен. Выполнить push?"
6. Пользователь: "да"
7. AI: [Выполняет git push]
```

### Пример 2: Реорганизация файлов

```
1. Пользователь: "Наведи порядок в проекте"
2. AI: [Проверяет PROJECT_STRUCTURE_RULES.md]
3. AI: [Перемещает файлы согласно правилам]
4. AI: [Коммитит: "refactor: Reorganize project structure"]
5. AI: "✓ Реорганизация завершена. Выполнить push?"
6. Пользователь: "запушь"
7. AI: [Выполняет git push]
```

### Пример 3: Исправление бага

```
1. Пользователь: "Исправь ошибку в API"
2. AI: [Исправляет баг]
3. AI: [Коммитит: "fix(backend): Fix API error"]
4. AI: "✓ Баг исправлен. Выполнить push?"
5. Пользователь: "нет, еще проверю"
6. AI: [НЕ делает push, ждет дальнейших указаний]
```

---

## 9. Нарушения правил

### Что считается нарушением:

1. ❌ Автоматический push без указания пользователя
2. ❌ Создание файлов в неправильных местах
3. ❌ Игнорирование `PROJECT_STRUCTURE_RULES.md`
4. ❌ Создание дубликатов файлов

### Что делать при нарушении:

1. Немедленно исправить
2. Извиниться перед пользователем
3. Убедиться, что правила понятны
4. Следовать правилам в дальнейшем

---

## 10. Ссылки на другие правила

- [PROJECT_STRUCTURE_RULES.md](PROJECT_STRUCTURE_RULES.md) - правила структурирования файлов
- [LEADGEN_RULES.md](LEADGEN_RULES.md) - правила работы с Cursor AI и агентами
- [GIT_SETUP_INSTRUCTIONS.md](GIT_SETUP_INSTRUCTIONS.md) - инструкции по настройке Git

---

**Последнее обновление**: 22 января 2026
**Версия документа**: 1.0

**⚠️ КРИТИЧЕСКИ ВАЖНО:** Push в репозиторий выполняется ТОЛЬКО по явному указанию пользователя!
